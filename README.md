# Boxy - ä½ çš„ä¸“å±åº”ç”¨æ”¶è—ä¸ç®¡ç†å·¥å…·

Boxy æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ä¸ªäººåº”ç”¨ç®¡ç†å¯¼èˆªå·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©ä½ é«˜æ•ˆåœ°æ”¶è—ã€æ•´ç†å’ŒæŸ¥æ‰¾å„ç±»è½¯ä»¶åŠåº”ç”¨ç¨‹åºã€‚é€šè¿‡ç›´è§‚çš„ç•Œé¢å’Œä¾¿æ·çš„æ‹–æ‹½æ“ä½œï¼Œä½ å¯ä»¥è½»æ¾ç®¡ç†ä½ æ”¶è—çš„å®è—è½¯ä»¶ï¼Œå¹¶æ”¯æŒ WebDAV åŒæ­¥ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ä¸ä¾¿æ·ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **åº”ç”¨ä¸åˆ†ç±»ç®¡ç†**ï¼šåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤åº”ç”¨å’Œåˆ†ç±»ï¼Œæ„å»ºæ¸…æ™°çš„ç®¡ç†ç»“æ„ã€‚
*   **æ‹–æ‹½æ’åº**ï¼šé€šè¿‡æ‹–æ‹½å³å¯è°ƒæ•´åˆ†ç±»å’Œåº”ç”¨çš„ä½ç½®ï¼Œå®ç°ä¸ªæ€§åŒ–å¸ƒå±€ã€‚
*   **å¿«é€Ÿæœç´¢**ï¼šå®æ—¶æœç´¢åŠŸèƒ½ï¼Œå¸®åŠ©ä½ è¿…é€Ÿæ‰¾åˆ°ç›®æ ‡åº”ç”¨ã€‚
*   **æ•°æ®å¯¼å…¥/å¯¼å‡º**ï¼šæ”¯æŒ JSON æ ¼å¼çš„æ•°æ®å¤‡ä»½ä¸æ¢å¤ã€‚
*   **WebDAV åŒæ­¥**ï¼šæ— ç¼å¯¹æ¥ WebDAV æœåŠ¡ï¼Œå°†ä½ çš„åº”ç”¨æ•°æ®åŒæ­¥åˆ°äº‘ç«¯ï¼Œå¤šè®¾å¤‡è®¿é—®æ— å¿§ã€‚
*   **æ™ºèƒ½å›¾æ ‡è·å–**ï¼šæ”¯æŒè‡ªå®šä¹‰å›¾æ ‡URLæˆ–ä¸Šä¼ å›¾ç‰‡ (è‡ªåŠ¨è½¬ Base64)ã€ä»£ç† API è·å–ã€Google Favicon é™çº§ç­‰å¤šçº§ç­–ç•¥ã€‚
*   **æ•°æ®åˆ†äº«**ï¼šä¸€é”®ç”Ÿæˆ Gist åˆ†äº«é“¾æ¥ï¼Œæ”¯æŒé¢„è§ˆæ¨¡å¼å’Œæ™ºèƒ½åˆå¹¶å¯¼å…¥ã€‚
*   **ä»“åº“ç®¡ç†**ï¼šç«™é•¿å¯åœ¨çº¿å°†å½“å‰æ•°æ®å›å†™åˆ° GitHub ä»“åº“ï¼Œæ›´æ–°åˆå§‹æ¨èåˆ—è¡¨ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

*   **å‰ç«¯**ï¼šReact, Vite, TailwindCSS
*   **UI ç»„ä»¶**ï¼šLucide Icons
*   **æ‹–æ‹½åº“**ï¼šDnd-kit
*   **åç«¯ (Serverless Functions)**ï¼šVercel Serverless Functions (Node.js) / Cloudflare Pages Functions (Edge Runtime)

## ğŸš€ å¿«é€Ÿå¼€å§‹ (æœ¬åœ°å¼€å‘)

è¯·ç¡®ä¿ä½ çš„æœ¬åœ°ç¯å¢ƒå·²å®‰è£… Node.js (v18+) å’Œ npmã€‚

1.  **å…‹éš†ä»“åº“**:
    ```bash
    git clone https://github.com/Airlur/boxy.git
    cd boxy
    ```
2.  **å®‰è£…ä¾èµ–**:
    ```bash
    npm install
    ```
3.  **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**:
    ```bash
    npm run dev
    ```
4.  **è®¿é—®æœåŠ¡**
    æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3137 ã€‚

**æ³¨æ„**ï¼šåœ¨æœ¬åœ° `npm run dev` ç¯å¢ƒä¸‹ï¼ŒFavicon çš„ä»£ç† API (`/api/favicon`) ä¸ä¼šè¢«è‡ªåŠ¨æ¨¡æ‹Ÿã€‚å‰ç«¯ä¼šå°è¯•è¯·æ±‚è¯¥ä»£ç† APIï¼Œå¤±è´¥åä¼šè‡ªåŠ¨é™çº§ä¸ºç›´æ¥è¯·æ±‚ Google Favicon APIã€‚å¦‚æœä½ æœ¬åœ°å¼€å¯äº†ä»£ç†ï¼Œåˆ™ä¼šæ­£å¸¸æ˜¾ç¤ºå›¾æ ‡ï¼›å¦‚æœæœªå¼€å¯ä»£ç†ä¸”æ— æ³•è®¿é—® Googleï¼Œåˆ™ä¼šæ˜¾ç¤ºåº”ç”¨åç§°çš„é¦–å­—æ¯ã€‚

## â˜ï¸ WebDAV åŒæ­¥æŒ‡å—

Boxy æ”¯æŒé€šè¿‡ WebDAV åè®®å°†ä½ çš„æ•°æ®åŒæ­¥åˆ°äº‘ç«¯ï¼Œå®ç°å¤šè®¾å¤‡é—´çš„æ•°æ®å…±äº«ä¸å¤‡ä»½ã€‚

### é…ç½®è¯´æ˜
1.  **æœåŠ¡å™¨åœ°å€**ï¼šè¾“å…¥å®Œæ•´çš„ WebDAV åœ°å€ï¼Œä¾‹å¦‚ `https://dav.jianguoyun.com/dav/` æˆ– `https://zeze.teracloud.jp/dav/`ã€‚
2.  **è´¦å·å¯†ç **ï¼š
    *   ä½¿ç”¨ **åº”ç”¨å¯†ç  (App Password)** è€Œéè´¦å·ç™»å½•å¯†ç ã€‚
3.  **è‡ªåŠ¨åŒæ­¥**:
    *   å¼€å¯åï¼ŒBoxy ä¼šåœ¨å¯åŠ¨æ—¶å°è¯•æ‹‰å–äº‘ç«¯æœ€æ–°æ•°æ®ã€‚
    *   å½“ä½ ä¿®æ”¹æ•°æ®ï¼ˆæ·»åŠ ã€æ’åºã€åˆ é™¤ï¼‰å¹¶åœæ­¢æ“ä½œ 2 ç§’åï¼ŒBoxy ä¼šè‡ªåŠ¨å°†å˜æ›´æ¨é€åˆ°äº‘ç«¯ã€‚
    *   æ³¨æ„ï¼šå¼€å¯è‡ªåŠ¨åŒæ­¥ä¼šè‡ªåŠ¨å‹¾é€‰â€œè®°ä½å¯†ç â€ã€‚

### ğŸ’¾ æœ¬åœ°å­˜å‚¨ (LocalStorage)
Boxy ä¾èµ–æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨åŠŸèƒ½ï¼Œä¸»è¦é”®å€¼è¯´æ˜å¦‚ä¸‹ï¼š

| Key | è¯´æ˜ |
| :--- | :--- |
| `boxy_data` | å­˜å‚¨æ‰€æœ‰çš„åˆ†ç±»ã€è½¯ä»¶åŠæ’åºæ•°æ® (JSON)ã€‚ |
| `boxy_webdav_config` | å­˜å‚¨ WebDAV çš„é…ç½®ä¿¡æ¯ (URL, ç”¨æˆ·å, å¯†ç ç­‰)ã€‚ |
| `boxy_share_cache` | ç¼“å­˜å·²ç”Ÿæˆçš„åˆ†äº«é“¾æ¥ (Gist ID)ï¼Œé¿å…çŸ­æ—¶é—´å†…é‡å¤åˆ›å»ºã€‚ |

## ğŸ“¢ åˆ†äº«ä¸ç®¡ç†

### æ•°æ®åˆ†äº« (Gist å¿«ç…§)
Boxy å†…ç½®äº†åŸºäº GitHub Gist çš„åˆ†äº«åŠŸèƒ½ï¼Œä½ å¯ä»¥ä¸€é”®ç”Ÿæˆå½“å‰æ•°æ®çš„ **åˆ†äº«é“¾æ¥**ï¼Œå‘é€ç»™æœ‹å‹æˆ–åœ¨ç¤¾åŒºåˆ†äº«ã€‚
*   **é¢„è§ˆæ¨¡å¼**ï¼šè®¿é—®åˆ†äº«é“¾æ¥çš„ç”¨æˆ·å°†è¿›å…¥åªè¯»é¢„è§ˆæ¨¡å¼ï¼Œç‚¹å‡»å¡ç‰‡æˆ–â€œä¸€é”®å¯¼å…¥â€å³å¯å°†åˆ†äº«å†…å®¹åˆå¹¶åˆ°æœ¬åœ°ã€‚
*   **å®‰å…¨é˜²åˆ·**ï¼šåˆ†äº«æ¥å£é›†æˆäº† Cloudflare Turnstile éªŒè¯ç ï¼Œæœ‰æ•ˆé˜²æ­¢æ¶æ„è°ƒç”¨ã€‚

### ç«™é•¿åŠŸèƒ½ï¼šæ›´æ–°ä»“åº“åˆå§‹æ•°æ®
å¦‚æœä½ æ˜¯ç½‘ç«™éƒ¨ç½²è€…ï¼Œä½ å¯ä»¥åœ¨è®¾ç½®ä¸­é€šè¿‡ **â€œä»“åº“ç®¡ç†â€** åŠŸèƒ½ï¼Œå°†å½“å‰ç½‘é¡µä¸Šçš„æœ€æ–°æ•°æ®å›å†™åˆ° GitHub ä»“åº“çš„ `initialData.json`ã€‚è¿™æ ·ï¼Œæ–°è®¿é—®çš„ç”¨æˆ·å°†ç›´æ¥çœ‹åˆ°ä½ æ¨èçš„æœ€æ–°åˆ—è¡¨ã€‚

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

è¦å¯ç”¨ **åˆ†äº«** å’Œ **ä»“åº“ç®¡ç†** åŠŸèƒ½ï¼Œéœ€åœ¨ Vercel/Cloudflare åå°é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | è¯´æ˜ |
| :--- | :--- |
| `GITHUB_TOKEN` | å…·æœ‰ `repo` å’Œ `gist` æƒé™çš„ GitHub Personal Access Tokenï¼Œä¾‹å¦‚ `ghp_xxx`ã€‚ |
| `GITHUB_REPO` | ä½ çš„ä»“åº“åœ°å€ï¼Œä¾‹å¦‚ `Airlur/boxy`ã€‚ |
| `ADMIN_PASSWORD` | è‡ªå®šä¹‰çš„ç®¡ç†å‘˜å¯†ç ï¼ˆä»“åº“æ›´æ–°æ—¶éœ€éªŒè¯ï¼‰ï¼Œä¾‹å¦‚ `Auth123`ã€‚ |
| `TURNSTILE_SECRET_KEY` | Cloudflare Turnstile çš„å¯†é’¥ (Secret Key)ï¼Œä¾‹å¦‚ `0x4AAAAAACH2P...`ã€‚ |

åŒæ—¶ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼Œå¡«å…¥å‰ç«¯ Site Keyï¼Œä¾‹å¦‚ï¼š
```env
VITE_TURNSTILE_SITE_KEY=0x4AAAAAACH2...
```

### é…ç½®æŒ‡å—

#### 1. GitHub Token
1.  è®¿é—® [GitHub Developer Settings](https://github.com/settings/tokens) -> `Generate new token` -> `Generate new token (classic)`ã€‚
2.  **Expiration**ï¼šå»ºè®®é€‰ "No expiration" æˆ– 1 å¹´.
3.  **Scopes**ï¼šå‹¾é€‰ `repo` (æ›´æ–°ä»“åº“) å’Œ `gist` (åˆ›å»ºåˆ†äº«)ã€‚
 
#### 2. Cloudflare Turnstile (éªŒè¯ç )
1.  ç™»å½• [Cloudflare Dashbord](https://dash.cloudflare.com/)ï¼Œä¾§è¾¹æ é€‰æ‹© `ä¿æŠ¤å’Œè¿æ¥` -> `åº”ç”¨ç¨‹åºå®‰å…¨` -> `Turnstile`ï¼Œç‚¹å‡»åˆ›å»ºå°ç»„ä»¶ã€‚
2.  **å°ç»„ä»¶åç§°**ï¼šè¾“å…¥ `Boxy-share`ã€‚
3.  **ä¸»æœºå**ï¼šæ·»åŠ ä½ çš„åŸŸåï¼ˆæœ¬åœ°å¼€å‘éœ€æ·»åŠ  `localhost` æˆ– `127.0.0.1`ï¼‰ã€‚
4.  **æ¨¡å¼**ï¼šé»˜è®¤é€‰æ‹© `æ‰˜ç®¡`ã€‚
5.  ç‚¹å‡»åˆ›å»ºï¼Œè·å– **ç«™ç‚¹å¯†é’¥ (Site Key)** å’Œ **å¯†é’¥ (Secret Key)**ã€‚
    *   Site Key å¡«å…¥ `.env` çš„ `VITE_TURNSTILE_SITE_KEY`ã€‚
    *   Secret Key å¡«å…¥éƒ¨ç½²å¹³å°çš„ `TURNSTILE_SECRET_KEY` ç¯å¢ƒå˜é‡ã€‚

## é¡¹ç›®éƒ¨ç½²

Boxy æ”¯æŒéƒ¨ç½²åˆ° Vercel æˆ– Cloudflare Pages ã€‚

### Vercel
ä½ å¯ä»¥åœ¨Vercelä¸Šä¸€é”®éƒ¨ç½²è‡ªå·±çš„ Boxy å®ä¾‹ï¼š

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/git/external?repository-url=https://github.com/Airlur/boxy)

æˆ–è€…æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨éƒ¨ç½²ï¼š
1.  Fork é¡¹ç›®ï¼Œä½¿ç”¨ GitHub è´¦æˆ·ç™»å½• [Vercel](https://vercel.com/) ã€‚
2.  ç‚¹å‡»å³ä¸Šè§’çš„ `Add New` æŒ‰é’®ï¼Œä¸‹æ‹‰æ¡†é€‰æ‹©ç¬¬ä¸€ä¸ª `Project` ã€‚
3.  é€‰æ‹©Boxyï¼Œç‚¹å‡» `Import`ã€‚`Framework Preset` é€‰æ‹© `Vite`ï¼Œç‚¹å‡»`Deploy`ã€‚


### Cloudflare Pages
ä½ å¯ä»¥åœ¨Cloudflare Pagesä¸Šä¸€é”®éƒ¨ç½²è‡ªå·±çš„ Boxy å®ä¾‹ï¼š

[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://dash.cloudflare.com/?to=/:account/pages/new/provider/github)

æˆ–è€…æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨éƒ¨ç½²ï¼š
1.  Fork é¡¹ç›®ï¼Œç„¶åç™»å½•æ‰“å¼€ [Cloudflare Dashbord](https://dash.cloudflare.com/)ã€‚
2.  ä¾§è¾¹æ é€‰æ‹© `æ„å»º` -> `è®¡ç®—å’Œ AI` -> `Workers å’Œ Pages`ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ `åˆ›å»ºåº”ç”¨ç¨‹åº` ã€‚
3.  ç‚¹å‡»å¡ç‰‡ä¸‹æ–¹ `Looking to deploy Pages?` å³è¾¹çš„ `Get started` æŒ‰é’®ã€‚
4.  è¿æ¥ GitHubè´¦å·ï¼Œé€‰æ‹© Boxy ä»“åº“ï¼Œç‚¹å‡»ä¸‹æ–¹ `å¼€å§‹è®¾ç½®`ã€‚
5.  é…ç½®é¡¹ç›®è®¾ç½®ï¼š
      - **é¡¹ç›®åç§°**ï¼š `boxy`
      - **ç”Ÿäº§åˆ†æ”¯**ï¼š `main`
      - **æ¡†æ¶é¢„è®¾**ï¼š `React(Vite)`
      - **æ„å»ºå‘½ä»¤**ï¼š `npm run build`
      - **æ„å»ºè¾“å‡ºç›®å½•**ï¼š `dist`
6.  ç‚¹å‡» `ä¿å­˜å¹¶éƒ¨ç½²`ï¼Œç­‰å¾…éƒ¨ç½²å®Œæˆã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
boxy/
â”œâ”€â”€ public/                 # é™æ€èµ„æºç›®å½• (Favicon ç­‰)
â”œâ”€â”€ api/                    # Vercel Serverless Functions ç›®å½•
â”‚   â”œâ”€â”€ webdav.js           # WebDAV ä»£ç†æœåŠ¡
â”‚   â”œâ”€â”€ favicon.js          # å›¾æ ‡ä»£ç†æœåŠ¡
â”‚   â”œâ”€â”€ gist.js             # Gist åˆ†äº«åŠŸèƒ½æœåŠ¡
â”‚   â””â”€â”€ update-repo.js      # ä»“åº“å›å†™æ›´æ–°æœåŠ¡
â”œâ”€â”€ functions/api/          # Cloudflare Pages Functions ç›®å½• (Edge Runtime)
â”‚   â””â”€â”€ ...                 # (æ–‡ä»¶åŠŸèƒ½åŒä¸Šï¼Œé€‚é… CF ç¯å¢ƒ)
â”œâ”€â”€ src/                    # å‰ç«¯æºä»£ç æ ¹ç›®å½•
â”‚   â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨å…¥å£ç»„ä»¶ (Layout & Context èšåˆ)
â”‚   â”œâ”€â”€ index.css           # å…¨å±€æ ·å¼ & Tailwind å¼•å…¥
â”‚   â”œâ”€â”€ components/         # UI ç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ layout/         # å¸ƒå±€ç»„ä»¶ (Header, Sidebar, Grid)
â”‚   â”‚   â”œâ”€â”€ modals/         # ä¸šåŠ¡å¼¹çª— (Settings, Share, Software ç­‰)
â”‚   â”‚   â”œâ”€â”€ ui/             # é€šç”¨åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SortableItem.jsx # dnd-kit æ‹–æ‹½é¡¹åŒ…è£…å™¨
â”‚   â”‚   â””â”€â”€ LinksInput.jsx  # å¤šé“¾æ¥åŠ¨æ€è¾“å…¥ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ä¸šåŠ¡ Logic Hooks
â”‚   â”‚   â”œâ”€â”€ useData.js      # æ•°æ®ç®¡ç† (CRUD & LocalStorage)
â”‚   â”‚   â”œâ”€â”€ useWebDAV.js    # WebDAV åŒæ­¥é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useSearch.js    # æœç´¢ä¸è¿‡æ»¤é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useDragDrop.js  # æ‹–æ‹½äº¤äº’é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ useToast.js     # å…¨å±€æ¶ˆæ¯æç¤º
â”‚   â”‚   â””â”€â”€ usePreviewMode.js # åˆ†äº«é¢„è§ˆæ¨¡å¼é€»è¾‘
â”‚   â”œâ”€â”€ data/               # é™æ€æ•°æ®ç›®å½•
â”‚   â”‚   â””â”€â”€ initialData.json # åº”ç”¨åˆå§‹é»˜è®¤æ•°æ®
â”‚   â””â”€â”€ lib/                # å·¥å…·å‡½æ•°ç›®å½•
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ (æœ¬åœ°å¼€å‘)
â”œâ”€â”€ vite.config.js          # Vite æ„å»ºé…ç½® (å«æœ¬åœ° API Mock)
â””â”€â”€ tailwind.config.js      # TailwindCSS æ ·å¼é…ç½®
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æå‡ºä»»ä½•æ”¹è¿›å»ºè®®æˆ–æäº¤ Pull Requestã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚